import{r as c,j as e,L as b,y as f,a as w}from"./app-CHY2S7fB.js";import{P as N}from"./PageHeader-BSMlnyHq.js";import{A as B}from"./AuthenticatedLayout-DLPlBDuW.js";import{F as i,B as j}from"./Form-vqJ0bOdo.js";import{R as S,C as p}from"./Card-BZedgk2Q.js";import{C as E}from"./Col-B7syMjbX.js";import{a as v}from"./axiosClient-CCDOYYJu.js";import"./ThemeProvider-CUgW6t52.js";function q({categories:y,banner:a=null}){const l=!!a,m=c.useRef(null),[n,u]=c.useState({}),[t,d]=c.useState({title:"",category_id:"",btn_txt:"",image:null,url:"",description:"",is_active:!0});c.useEffect(()=>{l&&a&&d({title:a.title||"",category_id:a.category_id||"",btn_txt:a.btn_txt||"",image:null,url:a.url||"",description:a.description||"",is_active:!0})},[l,a]);const _=async r=>{var x,h;r.preventDefault(),console.log(t);const g=C();if(Object.keys(g).length>0){u(g);return}const s=new FormData;s.append("title",t.title),s.append("btn_txt",t.btn_txt),s.append("category_id",t.category_id),s.append("description",t.description),s.append("is_active",t.is_active?1:0),t.image&&s.append("image",t.image);try{let o;l?(s.append("_method","PUT"),o=await v.post(`/admin/home-banners/${a.id}`,s)):o=await v.post("/admin/home-banners",s),f.success(o.data.message),l||(d({title:"",category_id:"",image:null,description:"",is_active:""}),m.current&&(m.current.value="")),w.visit("/admin/home-banners")}catch(o){f.error(((h=(x=o.response)==null?void 0:x.data)==null?void 0:h.message)||"Something went wrong"),o.response?(console.error("Error response:",o.response.data),u(o.response.data.errors||{})):console.error("Unexpected error:",o.message)}};function C(){let r={};return t.category_id||(r.category_id="Category is required."),t.title||(r.title="Banner title is required."),!l&&!t.image&&(r.image="Banner image is required"),r}return e.jsxs(B,{children:[e.jsx(N,{title:"Banner Details",menu:"Slider"}),e.jsx(S,{children:e.jsx(E,{sm:6,children:e.jsxs(p,{children:[e.jsxs(p.Header,{children:["    ",l?"Update":"Add New"," Banner"]}),e.jsx(p.Body,{children:e.jsxs(i,{onSubmit:_,encType:"multipart/form-data",children:[e.jsxs(i.Group,{className:"mb-3",controlId:"category_id",children:[e.jsx(i.Label,{children:"Select Category"}),e.jsxs(i.Select,{"aria-label":"Default select example",name:"category_id",value:t.category_id||"",onChange:r=>d({...t,category_id:r.target.value}),children:[e.jsx("option",{value:"",children:"Choose..."}),y.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]}),n.category_id&&e.jsx("div",{className:"text-danger",children:n.category_id})]}),e.jsxs(i.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[e.jsx(i.Label,{children:"Title"}),e.jsx(i.Control,{type:"text",name:"title",value:t.title||"",placeholder:"",onChange:r=>d({...t,title:r.target.value})}),n.title&&e.jsx("div",{className:"text-danger",children:n.title})]}),e.jsxs(i.Group,{className:"mb-3",controlId:"file",children:[e.jsx(i.Label,{children:"Upload Banner"}),e.jsx(i.Control,{type:"file",name:"image",ref:m,placeholder:"",onChange:r=>d({...t,image:r.target.files[0]})}),(a==null?void 0:a.image)&&e.jsx("img",{src:a.image,alt:"Current",style:{width:100,marginTop:10}}),n.image&&e.jsx("div",{className:"text-danger",children:n.image})]}),e.jsxs(i.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[e.jsx(i.Label,{children:"Description"}),e.jsx(i.Control,{as:"textarea",name:"description",value:t.description||"",rows:3,onChange:r=>d({...t,description:r.target.value}),children:" "}),n.description&&e.jsx("div",{className:"text-danger",children:n.description})]}),e.jsx(j,{type:"submit",variant:"success",className:"btn-sm waves-effect waves-light mb-3",children:l?"Update":"Create"}),e.jsxs(b,{href:"/admin/home-banners",children:[" ",e.jsx(j,{type:"button",variant:"danger",className:"btn btn-sm waves-effect waves-light  mb-3",children:" Cancel"})]})]})})]})})})]})}export{q as default};
