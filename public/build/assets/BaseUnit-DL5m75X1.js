import{r as h,j as e,L,y as x}from"./app-D0IB18SU.js";import{a as j}from"./axiosClient-TjsMXgSu.js";import{P as A}from"./PageHeader-BI9g6Sui.js";import{A as E}from"./AuthenticatedLayout-DkhqQJWC.js";import{R as k,C as _,a as c,F as n,B as y}from"./Card-D0MYNfrn.js";import{B as D}from"./Badge-B67NTS7W.js";import"./ThemeProvider-CaR9PPcu.js";function T({baseUnits:g,unitTypes:f}){const[v,w]=h.useState(null);let u=!!v;const[m,p]=h.useState(g),[l,b]=h.useState({}),[s,o]=h.useState({unit_type_id:"",name:"",base_unit:"",is_active:!1}),C=async t=>{var i,r;if(t.preventDefault(),!!N()){console.log(s);try{let a;console.log(s),u?a=await j.put(`/admin/base-unit/${s.id}`,s):a=await j.post("/admin/base-unit",s),x.success(a.data.message),u?p(m.map(d=>d.id===a.data.data.id?a.data.data:d)):(p([...m,a.data.data]),o({name:"",base_unit:"",is_active:"",unit_type_id:""}))}catch(a){x.error(((r=(i=a.response)==null?void 0:i.data)==null?void 0:r.message)||"Something went wrong"),a.response?(console.error("Error response:",a.response.data),b(a.response.data.errors||{})):console.error("Unexpected error:",a.message)}}};function N(){let t={};return s.name||(t.name="Name is required"),s.base_unit||(t.unit="Base unit is required"),s.unit_type_id||(t.unit_type_id="Unit Type is required"),b(t),t}const U=t=>{var i;w(t),o({...s,id:t.id,name:t.name,base_unit:t.base_unit,unit_type_id:(i=t.unit_type)==null?void 0:i.id,is_active:t.is_active})},B=async t=>{var i,r,a;if(confirm("Are you sure, you want to delete this?")){console.log(t);try{const d=await j.delete(`admin/base-unit/${t}`);d.data.status===!0&&(p(m.filter(S=>S.id!==t)),x.success((i=d.data)==null?void 0:i.message))}catch(d){console.error("Delete error:",d),x.error(((a=(r=d.response)==null?void 0:r.data)==null?void 0:a.message)||"Something went wrong")}}};return e.jsxs(E,{children:[e.jsx(A,{title:"Base Unit",menu:"Unit Type"}),e.jsxs(k,{children:[e.jsx(_,{sm:5,children:e.jsxs(c,{children:[e.jsxs(c.Header,{children:[" ",u?"Update":"Add New"," Base Unit"]}),e.jsx(c.Body,{children:e.jsxs(n,{onSubmit:C,children:[e.jsxs(n.Group,{className:"mb-3",controlId:"category_id",children:[e.jsx(n.Label,{children:"Select Unit Type"}),e.jsxs(n.Select,{"aria-label":"Default select example",name:"unit_type_id",value:s.unit_type_id||"",onChange:t=>o({...s,unit_type_id:t.target.value}),children:[e.jsx("option",{value:"",children:"Choose..."}),f.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),l.unit_type_id&&e.jsx("div",{className:"text-danger",children:l.unit_type_id})]}),e.jsxs(n.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[e.jsx(n.Label,{children:"Name"}),e.jsx(n.Control,{type:"text",name:"name",value:s.name||"",placeholder:"Ex: Gram",onChange:t=>o({...s,name:t.target.value})}),l.name&&e.jsx("div",{className:"text-danger",children:l.name})]}),e.jsxs(n.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[e.jsx(n.Label,{children:"Unit"}),e.jsx(n.Control,{type:"text",name:"base_unit",value:s.base_unit||"",placeholder:"Ex: gm",onChange:t=>o({...s,base_unit:t.target.value})}),l.base_unit&&e.jsx("div",{className:"text-danger",children:l.base_unit})]}),e.jsx(n.Check,{className:"mb-5",type:"switch",id:"custom-switch",label:"Is Active",checked:s.is_active,onChange:t=>o({...s,is_active:t.target.checked})}),e.jsx(y,{type:"submit",variant:"success",className:"btn-sm waves-effect waves-light mb-3",children:u?"Update":"Create"}),e.jsxs(L,{href:"/admin/unit-type",children:[" ",e.jsx(y,{type:"button",variant:"danger",className:"btn btn-sm waves-effect waves-light  mb-3",children:" Cancel"})]})]})})]})}),e.jsx(_,{sm:7,children:e.jsxs(c,{children:[e.jsx(c.Header,{children:" Base Unit List"}),e.jsx(c.Body,{children:e.jsxs("table",{id:"datatable-buttons",className:"table table-bordered dt-responsive nowrap w-100",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Sno"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Unit"}),e.jsx("th",{children:"Unit Type"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:m.map((t,i)=>{var r;return e.jsxs("tr",{children:[e.jsx("td",{children:i+1}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.base_unit}),e.jsx("td",{children:((r=t.unit_type)==null?void 0:r.name)||"N/A"}),e.jsxs("td",{children:[" ",e.jsx(D,{bg:t.is_active?"success":"secondary",children:t.is_active?"Active":"Disabled"})]}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-primary me-1",onClick:()=>U(t),children:"Edit"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>B(t.id),children:"Delete"})]})]},t.id)})})]})})]})})]})]})}export{T as default};
