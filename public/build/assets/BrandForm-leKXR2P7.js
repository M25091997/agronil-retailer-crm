import{r as o,j as e,L as h}from"./app-DMl1KjAW.js";import{a as d}from"./axiosClient-BDmtC2-U.js";import{P as u}from"./PageHeader-BwZ4Rrml.js";import{A as j}from"./AuthenticatedLayout-DU2jpzbD.js";function _({brand:r=null,categories:p}){const l=!!r,[n,m]=o.useState({}),[s,c]=o.useState({name:"",category_id:"",image:"",description:"",is_active:!0});o.useEffect(()=>{l&&r&&c({name:r.name||"",category_id:r.category_id||"",image:null,description:r.description||"",is_active:r.is_active??!0})},[r,l]);const g=async a=>{if(a.preventDefault(),console.log(s),!x())return;const t=new FormData;t.append("name",s.name),t.append("category_id",s.category_id),t.append("description",s.description),t.append("is_active",s.is_active?1:0),s.image&&t.append("image",s.image);try{let i;l?(t.append("_method","PUT"),i=await d.post(`/admin/brands/${r.id}`,t)):i=await d.post("/admin/brands",t),alert(i.data.message||"Operation successful.")}catch(i){i.response?(console.error("Error response:",i.response.data),m(i.response.data.errors||{})):console.error("Unexpected error:",i.message)}},x=()=>{var t;const a={};return(t=s.name)!=null&&t.trim()||(a.name="Brand name is required"),s.category_id||(a.category_id="Category is required"),!l&&!s.image&&(a.image="Brand image is required"),m(a),Object.keys(a).length===0};return e.jsxs(j,{children:[e.jsx(u,{title:"Brand's",menu:"Product"}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"card-title",children:"Brand Details."})}),e.jsx("div",{className:"card-body p-4",children:e.jsxs("form",{onSubmit:g,encType:"multipart/form-data",children:[e.jsx("div",{className:"col-lg-12",children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"form-group",children:[e.jsx("label",{for:"exampleFormControlSelect1",children:"Select Category"}),e.jsxs("select",{className:"form-control",name:"category_id",id:"exampleFormControlSelect1",value:s.category_id||"",onChange:a=>c({...s,category_id:a.target.value}),children:[e.jsx("option",{value:"",children:"Choose..."}),p.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),n.category_id&&e.jsx("div",{className:"text-danger",children:n.category_id})]})})}),e.jsx("div",{className:"col-lg-12",children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label",children:[" Brand Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"name",className:"form-control",value:s.name,onChange:a=>c({...s,name:a.target.value})}),n.name&&e.jsx("div",{className:"text-danger",children:n.name})]})})}),e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label",children:["Brand image ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"file",name:"image",className:"form-control",onChange:a=>c({...s,image:a.target.files[0]})}),(r==null?void 0:r.image)&&e.jsx("img",{src:r.image,alt:"Current",style:{width:100,marginTop:10}}),n.image&&e.jsx("div",{className:"text-danger",children:n.image})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{name:"description",className:"form-control",rows:"3",value:s.description,onChange:a=>c({...s,description:a.target.value})})]})}),e.jsxs("button",{type:"submit",name:"submitButton",className:"btn btn-success waves-effect waves-light mt-5 mb-3",children:[" ",l?"Update":"Create"," "]}),e.jsxs(h,{href:"/admin/brands",children:[" ",e.jsx("button",{type:"button",name:"submitButton",className:"btn btn-danger waves-effect waves-light mt-5 mb-3",children:" Cancel"})]})]})})]})})})]})}export{_ as default};
