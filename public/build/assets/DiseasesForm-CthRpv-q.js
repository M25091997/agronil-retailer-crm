import{j as e,L as g,r as m}from"./app-jeUwygDn.js";import{A as h,a as p}from"./AuthenticatedLayout-CN2x6Ld-.js";import{C as j}from"./CardHeader-D3KK9zQR.js";import{P as f}from"./PageHeader-Cn26Dpte.js";import"./plus-C3sG4Ike.js";function v({isEditMode:o,cancelUrl:t}){return e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"submit",name:"submitButton",className:"btn btn-success waves-effect waves-light mt-5 mb-3",children:[" ",o?"Update":"Create"," "]}),e.jsxs(g,{href:t,children:[" ",e.jsx("button",{type:"button",name:"submitButton",className:"btn btn-danger waves-effect waves-light mt-5 mb-3",children:" Cancel"})]})]})}function D({categories:o,disease:t=null}){const c=!!t,[n,d]=m.useState({}),[s,l]=m.useState({name:"",category_id:"",image:null,description:"",is_active:!0});m.useEffect(()=>{c&&t&&l({name:t.name,category_id:t.category_id,image:null,description:t.description,is_active:t.is_active||""})},[c,t]);const u=async a=>{if(a.preventDefault(),!x())return;const i=new FormData;i.append("name",s.name),i.append("category_id",s.category_id),i.append("description",s.description),i.append("is_active",s.is_active?1:0),s.image&&i.append("image",s.image);try{let r;c?r=await p.put(`/admin/diseases/${t.id}`,i):r=await p.post("/admin/diseases",i),alert(r.data.message||"Saved successfully"),l({name:"",category_id:"",description:"",is_active:!0})}catch(r){r.response&&r.response.data.errors?d(r.response.data.errors):console.error("Unexpected error:",r)}},x=()=>{const a={};return s.category_id||(a.category_id="Category is required"),s.name||(a.name="Disease Name is required"),d(a),Object.keys(a).length===0};return e.jsxs(h,{children:[e.jsx(f,{title:"Diseases",menu:"Product"}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"card",children:[e.jsx(j,{title:"Disease Details"}),e.jsx("div",{className:"card-body p-4",children:e.jsxs("form",{onSubmit:u,encType:"multipart/form-data",children:[e.jsx("div",{className:"col-lg-12",children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{class:"form-group",children:[e.jsx("label",{for:"exampleFormControlSelect1",children:"Select Category"}),e.jsxs("select",{class:"form-control",name:"category_id",id:"exampleFormControlSelect1",value:s.category_id||"",onChange:a=>l({...s,category_id:a.target.value}),children:[e.jsx("option",{value:"",children:"Choose..."}),o.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),n.category_id&&e.jsx("div",{className:"text-danger",children:n.category_id})]})})}),e.jsx("div",{className:"col-lg-12",children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{class:"form-group",children:[e.jsxs("label",{htmlFor:"name",className:"form-label",children:[" Disease Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"name",id:"name",className:"form-control",value:s.name,onChange:a=>l({...s,name:a.target.value})}),n.name&&e.jsx("div",{className:"text-danger",children:n.name})]})})}),e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label",children:["Disease image ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"file",name:"image",className:"form-control",onChange:a=>l({...s,image:a.target.files[0]})}),(t==null?void 0:t.image)&&e.jsx("img",{src:`/${t.image}`,alt:"Current",style:{width:100,marginTop:10}}),n.image&&e.jsx("div",{className:"text-danger",children:n.image})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"About Disease"}),e.jsx("textarea",{name:"description",className:"form-control",rows:"3",value:s.description,onChange:a=>l({...s,description:a.target.value})})]})}),e.jsx(v,{isEditMode:c,cancelUrl:"/admin/diseases"})]})})]})})})]})}export{D as default};
