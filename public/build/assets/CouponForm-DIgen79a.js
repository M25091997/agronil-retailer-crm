import{r as d,j as e,L as E,y as C,a as I}from"./app-CHY2S7fB.js";import{a as k}from"./axiosClient-CCDOYYJu.js";import{P as G}from"./PageHeader-BSMlnyHq.js";import{A}from"./AuthenticatedLayout-DLPlBDuW.js";import{R as O,C as m}from"./Card-BZedgk2Q.js";import{C as B}from"./Col-B7syMjbX.js";import{F as s,B as N}from"./Form-vqJ0bOdo.js";import"./ThemeProvider-CUgW6t52.js";function T({coupon:i=null,categories:L}){let o=!!i;console.log(i);const[l,u]=d.useState({}),[a,r]=d.useState({is_category:!1,category_id:"",name:"",title:"",code:"",amount:"",discount_type:"",is_all:!0,user_id:"",discount_on:"",is_minimum:!1,order_value:"",is_expiry:!1,expiry_date:"",is_limit:!1,limit:"",is_active:!0}),D=async t=>{var n,f;if(t.preventDefault(),!!S())try{let c;o?c=await k.put(`/admin/discount/coupons/${i.id}`,a):c=await k.post("/admin/discount/coupons",a),C.success(c.data.message),o||r({is_category:!1,category_id:"",name:"",title:"",code:"",amount:"",discount_type:"",is_all:!0,user_id:"",discount_on:"",is_minimum:!1,order_value:"",is_expiry:!1,expiry_date:"",is_limit:!1,limit:"",is_active:!0}),I.visit("/admin/discount/coupons")}catch(c){C.error(((f=(n=c.response)==null?void 0:n.data)==null?void 0:f.message)||"Something went wrong"),c.response?(console.error("Error response:",c.response.data),u(c.response.data.errors||{})):console.error("Unexpected error:",c.message)}};function S(){let t={};return a.name||(t.name="Name code is required"),a.code||(t.code="Coupan code is required"),a.discount_type||(t.discount_type="Discount type is required"),a.amount||(t.amount="Discount amount is required"),u(t),Object.keys(t).length===0}d.useEffect(()=>{o&&i&&(r({is_category:i.is_category,category_id:i.category_id,name:i.name,title:i.title,code:i.code,amount:i.amount,discount_type:i.discount_type,is_all:i.is_all,user_id:i.user_id,discount_on:i.discount_on,is_minimum:i.is_minimum,order_value:i.order_value,is_expiry:i.is_expiry,expiry_date:i.expiry_date,is_limit:i.is_limit,limit:i.limit,is_active:i.is_active}),h(i.is_all),_(i.is_limit),g(i.is_expiry),j(i.is_minimum),b(i.is_category))},[i,o]);const[w,h]=d.useState(!0),[x,_]=d.useState(!1),[p,g]=d.useState(!1),[y,j]=d.useState(!1),[v,b]=d.useState(!1);return e.jsxs(A,{children:[e.jsx(G,{title:"Discount Coupon",menu:"Offer & Discount"}),e.jsx(O,{children:e.jsx(B,{sm:5,children:e.jsxs(m,{children:[e.jsxs(m.Header,{children:[" ",o?"Update":"Add New"," Coupon"]}),e.jsx(m.Body,{children:e.jsxs(s,{onSubmit:D,children:[e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Name"}),e.jsx(s.Control,{type:"text",name:"name",value:a.name||"",placeholder:"",onChange:t=>r({...a,name:t.target.value})}),l.name&&e.jsx("div",{className:"text-danger",children:l.name})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Title"}),e.jsx(s.Control,{type:"text",name:"title",value:a.title||"",placeholder:"",onChange:t=>r({...a,title:t.target.value})}),l.title&&e.jsx("div",{className:"text-danger",children:l.title})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Discount Code "}),e.jsx(s.Control,{type:"text",name:"code ",value:a.code||"",placeholder:"",onChange:t=>r({...a,code:t.target.value})}),l.code&&e.jsx("div",{className:"text-danger",children:l.code})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Discount type"}),e.jsxs(s.Select,{"aria-label":"Default select example",name:"discount_type",value:a.discount_type||"",onChange:t=>r({...a,discount_type:t.target.value}),children:[e.jsx("option",{value:"",children:"Choose..."}),e.jsx("option",{value:"flat",children:"Flat Amount"}),e.jsx("option",{value:"percentage",children:"Percentage Amount"})]}),l.discount_type&&e.jsx("div",{className:"text-danger",children:l.discount_type})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Discount"}),e.jsx(s.Control,{type:"text",name:"amount",value:a.amount||"",placeholder:"Enter discount value",onChange:t=>r({...a,amount:t.target.value})}),l.amount&&e.jsx("div",{className:"text-danger",children:l.amount})]}),e.jsx(s.Check,{className:"mb-3",type:"checkbox",id:"is_all",checked:w,onChange:t=>{let n=t.target.checked;h(n),r({...a,is_all:n})},label:"Is all users"}),e.jsx(s.Check,{className:"mb-3",type:"checkbox",id:"is_limit",checked:x,onChange:t=>{let n=t.target.checked;_(n),r({...a,is_limit:n})},label:"Is limited users"}),x&&e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Limit"}),e.jsx(s.Control,{type:"text",name:"limit",value:a.limit||"",placeholder:"",onChange:t=>r({...a,limit:t.target.value})}),l.limit&&e.jsx("div",{className:"text-danger",children:l.limit})]}),e.jsx(s.Check,{className:"mb-3",type:"checkbox",id:"is_expiry",checked:p,onChange:t=>{let n=t.target.checked;g(n),r({...a,is_expiry:n})},label:"Is Expire Date"}),p&&e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Expiry Date"}),e.jsx(s.Control,{type:"date",name:"expiry_date",value:a.expiry_date||"",placeholder:"",onChange:t=>r({...a,expiry_date:t.target.value})}),l.expiry_date&&e.jsx("div",{className:"text-danger",children:l.expiry_date})]}),e.jsx(s.Check,{className:"mb-3",type:"checkbox",id:"is_minimum",checked:y,onChange:t=>{let n=t.target.checked;j(n),r({...a,is_minimum:n})},label:"Is Minimum Order"}),y&&e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Order Value"}),e.jsx(s.Control,{type:"text",name:"order_value",value:a.order_value||"",placeholder:"",onChange:t=>r({...a,order_value:t.target.value})}),l.order_value&&e.jsx("div",{className:"text-danger",children:l.order_value})]}),e.jsx(s.Check,{className:"mb-3",type:"checkbox",id:"is_category",checked:v,onChange:t=>{let n=t.target.checked;b(n),r({...a,is_category:n})},label:"Is specific category"}),v&&e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Select category"}),e.jsxs(s.Select,{"aria-label":"Default select example",name:"category_id",value:a.category_id||"",onChange:t=>r({...a,category_id:t.target.value}),children:[e.jsx("option",{value:"",children:"Choose..."}),L.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),l.category_id&&e.jsx("div",{className:"text-danger",children:l.category_id})]}),e.jsxs(s.Group,{className:"mb-3",children:[e.jsx(s.Label,{children:"Discount On"}),e.jsxs(s.Select,{"aria-label":"Default select example",name:"discount_on",value:a.discount_on||"",onChange:t=>r({...a,discount_on:t.target.value}),children:[e.jsx("option",{value:"",children:"Choose..."}),e.jsx("option",{value:"all",children:"All Order"}),e.jsx("option",{value:"varient",children:"Varient Order"}),e.jsx("option",{value:"bulk",children:"Bulk Order"})]}),l.discount_on&&e.jsx("div",{className:"text-danger",children:l.discount_on})]}),e.jsx(s.Check,{className:"mb-5",type:"switch",id:"custom-switch",label:"Is Active",checked:a.is_active,onChange:t=>r({...a,is_active:t.target.checked})}),e.jsx(N,{type:"submit",variant:"success",className:"btn-sm waves-effect waves-light mb-3",children:o?"Update":"Create"}),e.jsxs(E,{href:"/admin/discount/coupons",children:[" ",e.jsx(N,{type:"button",variant:"danger",className:"btn btn-sm waves-effect waves-light  mb-3",children:" Back"})]})]})})]})})})]})}export{T as default};
