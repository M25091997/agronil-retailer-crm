import{j as e,r as b,L as B}from"./app-0UtbzSt3.js";import{a as k}from"./axiosClient-CX3j6BoW.js";import{P as w}from"./PageHeader-BJpatnqc.js";import{R as f,C as L}from"./Card-D_TFmHog.js";import{C as l,F as a,B as C}from"./Form-CY99kw8l.js";import{P as S}from"./plus-B5U1dTat.js";import{c as D,A as F}from"./AuthenticatedLayout-BviFycpt.js";import"./ThemeProvider-CmAeE7o-.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],V=D("trash-2",A);function q({baseUnits:d,variants:j,onChange:g}){const _=(c,n,r)=>{const x=[...j];x[c][n]=r,g(x)},p=(c,n,r,x)=>{const h=[...j];h[c].bulk[n][r]=x,g(h)},i=()=>{const c=[...j,{base_unit_id:"",quantity:"",price:"",original_price:"",unit_rate:"",stock:"",is_bulk:!1,bulk:[{pieces_per_box:"",bulk_qty_range:"",bulk_price:"",total_box_price:"",margin:"",bulk_stock:"",best_value:!1}]}];g(c)},v=c=>{const n=[...j];n[c].bulk.push({pieces_per_box:"",bulk_qty_range:"",bulk_price:"",total_box_price:"",margin:"",bulk_stock:"",best_value:!1}),g(n)},y=(c,n)=>{const r=[...j];r[c].bulk.length>1&&(r[c].bulk.splice(n,1),g(r))};return e.jsxs(e.Fragment,{children:[j.map((c,n)=>e.jsxs("div",{className:"mb-4 p-3 border rounded bg-light",children:[e.jsxs(f,{children:[e.jsx(l,{md:2,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Select Base Unit"}),e.jsxs(a.Select,{value:c.base_unit_id,onChange:r=>_(n,"base_unit_id",r.target.value),children:[e.jsx("option",{value:"",children:"Choose..."}),d.map(r=>e.jsxs("option",{value:r.id,children:["  ",r.name,"(",r.base_unit,")"]},r.id))]})]})}),e.jsx(l,{md:2,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Weight or Pcs"}),e.jsx(a.Control,{type:"text",autoComplete:"off",value:c.quantity,onChange:r=>_(n,"quantity",r.target.value)})]})}),e.jsx(l,{md:2,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Price per Unit (â‚¹)"}),e.jsx(a.Control,{type:"text",autoComplete:"off",value:c.price,onChange:r=>_(n,"price",r.target.value)})]})}),e.jsx(l,{md:2,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Original Price (â‚¹)"}),e.jsx(a.Control,{type:"text",autoComplete:"off",value:c.original_price,onChange:r=>_(n,"original_price",r.target.value)})]})}),e.jsx(l,{md:2,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"KG Rate (â‚¹/L or â‚¹/KG)"}),e.jsx(a.Control,{type:"text",autoComplete:"off",placeholder:"Auto: Price/weight Ã— 1000",value:c.unit_rate,onChange:r=>_(n,"unit_rate",r.target.value)})]})}),e.jsx(l,{md:2,children:e.jsx(a.Check,{label:"Available in Bulk",checked:c.is_bulk,onChange:r=>_(n,"is_bulk",r.target.checked)})})]}),c.is_bulk&&c.bulk.map((r,x)=>e.jsxs(f,{className:"pt-3",children:[e.jsx("h6",{className:"text-info mb-2 mt-3",children:"ðŸ§® Bulk Pricing"}),e.jsx(l,{md:2,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"No. of Pieces/Box"}),e.jsx(a.Control,{type:"text",value:r.pieces_per_box,onChange:h=>p(n,x,"pieces_per_box",h.target.value)})]})}),e.jsx(l,{md:2,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Bulk Qty Range"}),e.jsx(a.Control,{type:"text",value:r.bulk_qty_range,onChange:h=>p(n,x,"bulk_qty_range",h.target.value)})]})}),e.jsx(l,{md:2,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Bulk Price"}),e.jsx(a.Control,{type:"text",value:r.bulk_price,onChange:h=>p(n,x,"bulk_price",h.target.value)})]})}),e.jsx(l,{md:2,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Total Box Price"}),e.jsx(a.Control,{type:"text",value:r.total_box_price,onChange:h=>p(n,x,"total_box_price",h.target.value)})]})}),e.jsx(l,{md:2,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{children:"Margin (%)"}),e.jsx(a.Control,{type:"text",value:r.margin,onChange:h=>p(n,x,"margin",h.target.value)})]})}),e.jsx(l,{md:1,className:"d-flex align-items-center",children:e.jsx(a.Check,{label:"Best Value",checked:r.best_value,onChange:h=>p(n,x,"best_value",h.target.checked)})}),e.jsxs(l,{md:1,className:"d-flex gap-1 mt-4",children:[e.jsx(C,{variant:"warning",className:"btn-sm",onClick:()=>v(n),children:e.jsx(S,{})}),e.jsx(C,{variant:"danger",className:"btn-sm",onClick:()=>y(n,x),disabled:c.bulk.length===1,children:e.jsx(V,{})})]})]},x))]},n)),e.jsx(f,{className:"mb-3",children:e.jsx(l,{md:2,children:e.jsxs(C,{variant:"info",className:"btn-sm waves-effect waves-light mb-3",onClick:i,children:[e.jsx(S,{})," Add More Variant"]})})})]})}function $({product:d=null,categories:j,unitTypes:g,baseUnits:_}){const p=!!d,[i,v]=b.useState({}),[y,c]=b.useState([]),[n,r]=b.useState([]),[x,h]=b.useState([]),[t,m]=b.useState({name:"",category_id:"",sub_category_id:"",brand_id:"",disease_id:"",sku:"",unit_type_id:"",base_unit_id:"",images:[],hsn_code:"",sort_description:"",description:"",specification:"",other_information:"",is_active:!1,product_variant_price:[]});b.useEffect(()=>{p&&d&&m({name:d.name,category_id:d.category_id,sub_category_id:d.sub_category_id,brand_id:d.brand_id,disease_id:d.disease_id,sku:d.sku,unit_type_id:d.unit_type_id,base_unit_id:d.base_unit_id,images:d.images,hsn_code:d.hsn_code,sort_description:d.sort_description,description:d.description,specification:d.specification,other_information:d.other_information,is_active:d.is_active??!1,product_variant_price:d.variants})},[d,p]);const P=async s=>{const u=s.target.value;m(o=>({...o,category_id:u,sub_category_id:"",brand_id:"",disease_id:""}));try{const o=await k.get(`/admin/category/dependencies/${u}`);c(o.data.subcategories),r(o.data.brands),h(o.data.diseases)}catch(o){console.error("Error loading dependencies:",o)}},G=async s=>{s.preventDefault();const u=new FormData;for(let o in t)if(o==="product_variant_price")u.append(o,JSON.stringify(t[o]));else if(o==="images"&&t[o])for(let N=0;N<t[o].length;N++)u.append("images[]",t[o][N]);else u.append(o,t[o]);console.log(t.product_variant_price);try{let o;p?(u.append("_method","PUT"),o=await k.post(`/admin/products/${category.id}`,u)):o=await k.post("/admin/products",u)}catch(o){o.response?(console.error("Error response:",o.response.data),v(o.response.data.errors||{})):console.error("Unexpected error:",o.message)}};return e.jsxs(F,{children:[e.jsx(w,{title:"Product Details"}),e.jsx(f,{children:e.jsxs(L,{children:[e.jsxs(L.Header,{children:["    ",p?"Update":"Add New"," Product "]}),e.jsx(L.Body,{children:e.jsxs(a,{onSubmit:G,encType:"multipart/form-data",children:[e.jsx("h6",{className:"text-info mb-3",children:" Basic Information "}),e.jsxs(f,{children:[e.jsx(l,{md:4,children:e.jsxs(a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[e.jsx(a.Label,{children:"Product Name"})," ",e.jsx("span",{className:"text-danger",children:"*"}),e.jsx(a.Control,{type:"text",name:"name",value:t.name||"",placeholder:"",autoComplete:"off",onChange:s=>m({...t,name:s.target.value})}),i.name&&e.jsx("div",{className:"text-danger",children:i.name})]})}),e.jsx(l,{md:4,children:e.jsxs(a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[e.jsx(a.Label,{children:"Short Description"}),e.jsx(a.Control,{as:"textarea",name:"sort_description",value:t.sort_description||"",rows:3,onChange:s=>m({...t,sort_description:s.target.value}),children:" "}),i.sort_description&&e.jsx("div",{className:"text-danger",children:i.sort_description})]})}),e.jsx(l,{md:4,children:e.jsxs(a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[e.jsx(a.Label,{children:"Product SKU Id"})," ",e.jsx("span",{className:"text-danger",children:"*"}),e.jsx(a.Control,{type:"text",name:"sku",value:t.sku||"",placeholder:"",autoComplete:"off",onChange:s=>m({...t,sku:s.target.value})}),i.sku&&e.jsx("div",{className:"text-danger",children:i.sku})]})}),e.jsx(l,{md:4,children:e.jsxs(a.Group,{className:"mb-3",controlId:"category_id",children:[e.jsx(a.Label,{children:"Select Category"})," ",e.jsx("span",{className:"text-danger",children:"*"}),e.jsxs(a.Select,{"aria-label":"Default select example",name:"category_id",value:t.category_id||"",onChange:P,children:[e.jsx("option",{value:"",children:"Choose..."}),j.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),i.category_id&&e.jsx("div",{className:"text-danger",children:i.category_id})]})}),e.jsx(l,{md:4,children:e.jsxs(a.Group,{className:"mb-3",controlId:"category_id",children:[e.jsx(a.Label,{children:"Select Sub Category"})," ",e.jsx("span",{className:"text-danger",children:"*"}),e.jsxs(a.Select,{"aria-label":"Default select example",name:"category_id",value:t.sub_category_id||"",onChange:s=>m({...t,sub_category_id:s.target.value}),children:[e.jsx("option",{value:"",children:"Choose..."}),y.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),i.sub_category_id&&e.jsx("div",{className:"text-danger",children:i.sub_category_id})]})}),e.jsx(l,{md:4,children:e.jsxs(a.Group,{className:"mb-3",controlId:"category_id",children:[e.jsx(a.Label,{children:"Select Brand (Optinal)"}),e.jsxs(a.Select,{"aria-label":"Default select example",name:"brand_id",value:t.brand_id||"",onChange:s=>m({...t,brand_id:s.target.value}),children:[e.jsx("option",{value:"",children:"Choose..."}),n.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),i.brand_id&&e.jsx("div",{className:"text-danger",children:i.brand_id})]})}),e.jsx(l,{md:4,children:e.jsxs(a.Group,{className:"mb-3",controlId:"category_id",children:[e.jsx(a.Label,{children:"Select Disease (Optinal)"}),e.jsxs(a.Select,{"aria-label":"Default select example",name:"disease_id",value:t.disease_id||"",onChange:s=>m({...t,disease_id:s.target.value}),children:[e.jsx("option",{value:"",children:"Choose..."}),x.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),i.disease_id&&e.jsx("div",{className:"text-danger",children:i.disease_id})]})}),e.jsx(l,{md:4,children:e.jsxs(a.Group,{className:"mb-3",controlId:"category_id",children:[e.jsx(a.Label,{children:"Select Unit Type"}),e.jsxs(a.Select,{"aria-label":"Default select example",name:"unit_type_id",value:t.unit_type_id||"",onChange:s=>m({...t,unit_type_id:s.target.value}),children:[e.jsx("option",{value:"",children:"Choose..."}),g.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),i.unit_type_id&&e.jsx("div",{className:"text-danger",children:i.unit_type_id})]})}),e.jsx(l,{md:4,children:e.jsxs(a.Group,{className:"mb-3",controlId:"category_id",children:[e.jsx(a.Label,{children:"Select Base Unit"}),e.jsxs(a.Select,{"aria-label":"Default select example",name:"base_unit_id",value:t.base_unit_id||"",onChange:s=>m({...t,base_unit_id:s.target.value}),children:[e.jsx("option",{value:"",children:"Choose..."}),_.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.base_unit,")"]},s.id))]}),i.base_unit_id&&e.jsx("div",{className:"text-danger",children:i.base_unit_id})]})}),e.jsxs(l,{md:3,children:[e.jsxs(a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[e.jsx(a.Label,{children:"Product Image (Can select more then one)"})," ",e.jsx("span",{className:"text-danger",children:"*"}),e.jsx(a.Control,{type:"file",name:"images[]",placeholder:"",autoComplete:"off",multiple:!0,onChange:s=>m({...t,images:s.target.files})})]}),e.jsx("div",{style:{display:"flex"},children:t.images&&Array.isArray(t.images)&&t.images.map((s,u)=>e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:s.image_path,alt:"Product",style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"5px"}})},u))}),i.images&&e.jsx("div",{className:"text-danger",children:i.images})]}),e.jsx(l,{md:3,children:e.jsxs(a.Group,{className:"mb-3",controlId:"exampleForm.hsn_code",children:[e.jsx(a.Label,{children:"HSN Code (optional)"}),e.jsx(a.Control,{type:"text",name:"hsn_code",placeholder:"",autoComplete:"off",value:t.hsn_code||"",onChange:s=>m({...t,hsn_code:s.target.value})}),i.hsn_code&&e.jsx("div",{className:"text-danger",children:i.hsn_code})]})})]}),e.jsx("hr",{}),e.jsxs(f,{children:[e.jsx("h6",{className:"text-info mb-2 mt-3",children:" Product Details"}),e.jsx(l,{md:6,children:e.jsxs(a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[e.jsx(a.Label,{children:"Product Specification"}),e.jsx(a.Control,{as:"textarea",name:"specification",value:t.specification||"",rows:3,onChange:s=>m({...t,specification:s.target.value}),children:" "}),i.specification&&e.jsx("div",{className:"text-danger",children:i.specification})]})}),e.jsx(l,{md:6,children:e.jsxs(a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[e.jsx(a.Label,{children:"Product Detailed  Description"}),e.jsx(a.Control,{as:"textarea",name:"description",value:t.description||"",rows:3,onChange:s=>m({...t,description:s.target.value}),children:" "}),i.description&&e.jsx("div",{className:"text-danger",children:i.description})]})}),e.jsx(l,{md:6,children:e.jsxs(a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[e.jsx(a.Label,{children:"Other Information"}),e.jsx(a.Control,{as:"textarea",name:"other_information",value:t.other_information||"",rows:3,onChange:s=>m({...t,other_information:s.target.value}),children:" "}),i.other_information&&e.jsx("div",{className:"text-danger",children:i.other_information})]})})]}),e.jsx("hr",{}),e.jsx("h6",{className:"text-info mb-2 mt-3",children:"ðŸ“¦ Product Variant & Pricing"}),e.jsx(q,{variants:t.product_variant_price,baseUnits:_,onChange:s=>m({...t,product_variant_price:s})}),e.jsxs(C,{type:"submit",variant:"success",className:"btn-sm waves-effect waves-light mb-3",children:[p?"Update":"Save"," Product"]}),e.jsxs(B,{href:"/admin/home-banners",children:[" ",e.jsx(C,{type:"button",variant:"danger",className:"btn btn-sm waves-effect waves-light  mb-3",children:" Cancel"})]})]})})]})})]})}export{$ as default};
