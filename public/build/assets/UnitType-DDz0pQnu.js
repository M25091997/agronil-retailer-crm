import{r as p,j as e,L,y as x}from"./app-BV5JBiLm.js";import{a as y}from"./axiosClient-B2D__FuD.js";import{P as T}from"./PageHeader-CkRZRRRX.js";import{A as _}from"./AuthenticatedLayout-vhvuIAHI.js";import{R as A,C as i}from"./Card-CbhU03nD.js";import{C as f}from"./Col-P9ErBZdk.js";import{F as a,B as g}from"./Form-Ci1Ud1AT.js";import{B}from"./Badge-BWGbrrzi.js";import"./ThemeProvider-eU08k4HY.js";function K({unitTypes:v}){const[w,C]=p.useState(null);let l=!!w;const[c,j]=p.useState(v),[m,b]=p.useState({}),[n,u]=p.useState({name:"",unit:"",is_active:!0}),U=async t=>{var o,d;t.preventDefault();const r=N();if(Object.keys(r).length>0){b(r);return}try{let s;console.log(n),l?s=await y.put(`/admin/unit-type/${n.id}`,n):s=await y.post("/admin/unit-type",n),x.success(s.data.message),l?j(c.map(h=>h.id===s.data.data.id?s.data.data:h)):(j([...c,s.data.data]),u({name:"",unit:"",is_active:!0}))}catch(s){x.error(((d=(o=s.response)==null?void 0:o.data)==null?void 0:d.message)||"Something went wrong"),s.response?(console.error("Error response:",s.response.data),b(s.response.data.errors||{})):console.error("Unexpected error:",s.message)}};function N(){let t={};return n.name||(t.name="Unit name is required."),n.unit||(t.unit="Unit is required."),b(t),t}const S=async t=>{var r,o,d;if(confirm("Are you sure, you want to delete this?")){console.log(t);try{const s=await y.delete(`admin/unit-type/${t}`);s.data.status===!0&&(j(c.filter(h=>h.id!==t)),x.success((r=s.data)==null?void 0:r.message))}catch(s){console.error("Delete error:",s),x.error(((d=(o=s.response)==null?void 0:o.data)==null?void 0:d.message)||"Something went wrong")}}},E=t=>{C(t),u({...n,id:t.id,name:t.name,unit:t.unit,is_active:t.is_active})};return e.jsxs(_,{children:[e.jsx(T,{title:"Unit Types",menu:"Product"}),e.jsxs(A,{children:[e.jsx(f,{sm:5,children:e.jsxs(i,{children:[e.jsxs(i.Header,{children:["    ",l?"Update":"Add New","  Unit Type"]}),e.jsx(i.Body,{children:e.jsxs(a,{onSubmit:U,children:[e.jsxs(a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[e.jsx(a.Label,{children:"Name"}),e.jsx(a.Control,{type:"text",name:"name",value:n.name||"",placeholder:"Ex: Kilogram",onChange:t=>u({...n,name:t.target.value})}),m.name&&e.jsx("div",{className:"text-danger",children:m.name})]}),e.jsxs(a.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[e.jsx(a.Label,{children:"Unit"}),e.jsx(a.Control,{type:"text",name:"unit",value:n.unit||"",placeholder:"Ex: Kg",onChange:t=>u({...n,unit:t.target.value})}),m.unit&&e.jsx("div",{className:"text-danger",children:m.unit})]}),e.jsx(g,{type:"submit",variant:"success",className:"btn-sm waves-effect waves-light mb-3",children:l?"Update":"Create"}),e.jsxs(L,{href:"/admin/unit-type",children:[" ",e.jsx(g,{type:"button",variant:"danger",className:"btn btn-sm waves-effect waves-light  mb-3",children:" Cancel"})]})]})})]})}),e.jsx(f,{sm:7,children:e.jsxs(i,{children:[e.jsx(i.Header,{children:"Unit Type List"}),e.jsx(i.Body,{children:e.jsxs("table",{id:"datatable-buttons",className:"table table-bordered dt-responsive nowrap w-100",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Sno"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Unit"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:c.map((t,r)=>e.jsxs("tr",{children:[e.jsx("td",{children:r+1}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.unit}),e.jsxs("td",{children:[" ",e.jsx(B,{bg:t.is_active?"success":"secondary",children:t.is_active?"Active":"Disabled"})]}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-primary me-1",onClick:()=>E(t),children:"Edit"}),e.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>S(t.id),children:"Delete"})]})]},t.id))})]})})]})})]})]})}export{K as default};
