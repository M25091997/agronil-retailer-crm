import{r as x,j as e,L as w,y as _,a as B}from"./app-jeUwygDn.js";import{P as N}from"./PageHeader-Cn26Dpte.js";import{A as P,a as b}from"./AuthenticatedLayout-CN2x6Ld-.js";import{u as D,c as L}from"./ThemeProvider-C-z6kX8x.js";import{R as S,C as E,a as h,F as c}from"./Card-3fm6YtlV.js";const F=["as","disabled"];function I(r,t){if(r==null)return{};var s={};for(var o in r)if({}.hasOwnProperty.call(r,o)){if(t.indexOf(o)>=0)continue;s[o]=r[o]}return s}function R(r){return!r||r.trim()==="#"}function C({tagName:r,disabled:t,href:s,target:o,rel:l,role:u,onClick:a,tabIndex:d=0,type:g}){r||(s!=null||o!=null||l!=null?r="a":r="button");const p={tagName:r};if(r==="button")return[{type:g||"button",disabled:t},p];const i=n=>{if((t||r==="a"&&R(s))&&n.preventDefault(),t){n.stopPropagation();return}a==null||a(n)},f=n=>{n.key===" "&&(n.preventDefault(),i(n))};return r==="a"&&(s||(s="#"),t&&(s=void 0)),[{role:u??"button",disabled:void 0,tabIndex:t?void 0:d,href:s,target:r==="a"?o:void 0,"aria-disabled":t||void 0,rel:r==="a"?l:void 0,onClick:i,onKeyDown:f},p]}const $=x.forwardRef((r,t)=>{let{as:s,disabled:o}=r,l=I(r,F);const[u,{tagName:a}]=C(Object.assign({tagName:s,disabled:o},l));return e.jsx(a,Object.assign({},l,u,{ref:t}))});$.displayName="Button";const j=x.forwardRef(({as:r,bsPrefix:t,variant:s="primary",size:o,active:l=!1,disabled:u=!1,className:a,...d},g)=>{const p=D(t,"btn"),[i,{tagName:f}]=C({tagName:r,disabled:u,...d}),n=f;return e.jsx(n,{...i,...d,ref:g,disabled:u,className:L(a,p,l&&"active",s&&`${p}-${s}`,o&&`${p}-${o}`,d.href&&u&&"disabled")})});j.displayName="Button";function H({categories:r,banner:t=null}){const s=!!t,o=x.useRef(null),[l,u]=x.useState({}),[a,d]=x.useState({title:"",category_id:"",btn_txt:"",image:null,url:"",description:"",is_active:!0});x.useEffect(()=>{s&&t&&d({title:t.title||"",category_id:t.category_id||"",btn_txt:t.btn_txt||"",image:null,url:t.url||"",description:t.description||"",is_active:!0})},[s,t]);const g=async i=>{var y,v;i.preventDefault(),console.log(a);const f=p();if(Object.keys(f).length>0){u(f);return}const n=new FormData;n.append("title",a.title),n.append("btn_txt",a.btn_txt),n.append("category_id",a.category_id),n.append("description",a.description),n.append("is_active",a.is_active?1:0),a.image&&n.append("image",a.image);try{let m;s?(n.append("_method","PUT"),m=await b.post(`/admin/home-banners/${t.id}`,n)):m=await b.post("/admin/home-banners",n),_.success(m.data.message),s||(d({title:"",category_id:"",image:null,description:"",is_active:""}),o.current&&(o.current.value="")),B.visit("/admin/home-banners")}catch(m){_.error(((v=(y=m.response)==null?void 0:y.data)==null?void 0:v.message)||"Something went wrong"),m.response?(console.error("Error response:",m.response.data),u(m.response.data.errors||{})):console.error("Unexpected error:",m.message)}};function p(){let i={};return a.category_id||(i.category_id="Category is required."),a.title||(i.title="Banner title is required."),!s&&!a.image&&(i.image="Banner image is required"),i}return e.jsxs(P,{children:[e.jsx(N,{title:"Banner Details",menu:"Slider"}),e.jsx(S,{children:e.jsx(E,{sm:6,children:e.jsxs(h,{children:[e.jsxs(h.Header,{children:["    ",s?"Update":"Add New"," Banner"]}),e.jsx(h.Body,{children:e.jsxs(c,{onSubmit:g,encType:"multipart/form-data",children:[e.jsxs(c.Group,{className:"mb-3",controlId:"category_id",children:[e.jsx(c.Label,{children:"Select Category"}),e.jsxs(c.Select,{"aria-label":"Default select example",name:"category_id",value:a.category_id||"",onChange:i=>d({...a,category_id:i.target.value}),children:[e.jsx("option",{value:"",children:"Choose..."}),r.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]}),l.category_id&&e.jsx("div",{className:"text-danger",children:l.category_id})]}),e.jsxs(c.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[e.jsx(c.Label,{children:"Title"}),e.jsx(c.Control,{type:"text",name:"title",value:a.title||"",placeholder:"",onChange:i=>d({...a,title:i.target.value})}),l.title&&e.jsx("div",{className:"text-danger",children:l.title})]}),e.jsxs(c.Group,{className:"mb-3",controlId:"file",children:[e.jsx(c.Label,{children:"Upload Banner"}),e.jsx(c.Control,{type:"file",name:"image",ref:o,placeholder:"",onChange:i=>d({...a,image:i.target.files[0]})}),(t==null?void 0:t.image)&&e.jsx("img",{src:`/${t.image}`,alt:"Current",style:{width:100,marginTop:10}}),l.image&&e.jsx("div",{className:"text-danger",children:l.image})]}),e.jsxs(c.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[e.jsx(c.Label,{children:"Description"}),e.jsx(c.Control,{as:"textarea",name:"description",value:a.description||"",rows:3,onChange:i=>d({...a,description:i.target.value}),children:" "}),l.description&&e.jsx("div",{className:"text-danger",children:l.description})]}),e.jsx(j,{type:"submit",variant:"success",className:"btn-sm waves-effect waves-light mb-3",children:s?"Update":"Create"}),e.jsxs(w,{href:"/admin/home-banners",children:[" ",e.jsx(j,{type:"button",variant:"danger",className:"btn btn-sm waves-effect waves-light  mb-3",children:" Cancel"})]})]})})]})})})]})}export{H as default};
