import{r as m,j as e,L as v,y as h}from"./app-DMl1KjAW.js";import{a as f}from"./axiosClient-BDmtC2-U.js";import{A as b}from"./AuthenticatedLayout-DU2jpzbD.js";function y({category:a=null}){const[c,d]=m.useState({}),o=m.useRef(null),n=!!a,[s,l]=m.useState({name:"",image:null,description:"",is_active:!0});m.useEffect(()=>{n&&a&&l({name:a.name||"",image:null,description:a.description||"",is_active:a.is_active??!0})},[a,n]);const g=async i=>{var u,x;i.preventDefault(),console.log(s);const p=j();if(Object.keys(p).length>0){d(p);return}const t=new FormData;t.append("name",s.name),t.append("description",s.description),t.append("is_active",s.is_active?1:0),s.image&&t.append("image",s.image);try{let r;n?(t.append("_method","PUT"),r=await f.post(`/admin/categories/${a.id}`,t)):r=await f.post("/admin/categories",t),h.success(r.data.message),n||(l({name:"",image:null,description:"",is_active:""}),o.current&&(o.current.value=""))}catch(r){h.error(((x=(u=r.response)==null?void 0:u.data)==null?void 0:x.message)||"Something went wrong"),r.response?(console.error("Error response:",r.response.data),d(r.response.data.errors||{})):console.error("Unexpected error:",r.message)}},j=()=>{const i={};return s.name||(i.name="Category name is required"),!n&&!s.image&&(i.image="Category image is required"),i};return e.jsxs(b,{children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"page-title-box d-sm-flex align-items-center justify-content-between",children:[e.jsx("h4",{className:"mb-sm-0 font-size-18",children:"Category"}),e.jsx("div",{className:"page-title-right",children:e.jsxs("ol",{className:"breadcrumb m-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"javascript: void(0);",children:"Category"})}),e.jsx("li",{className:"breadcrumb-item active",children:"Product"})]})})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"card-title",children:"Category Details."})}),e.jsx("div",{className:"card-body p-4",children:e.jsxs("form",{onSubmit:g,encType:"multipart/form-data",children:[e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label",children:["Category Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{className:"form-control",type:"text",name:"name",value:s.name,onChange:i=>l({...s,name:i.target.value})}),c.name&&e.jsx("div",{className:"text-danger",children:c.name})]})}),e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label",children:["Category image ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{className:"form-control",type:"file",name:"image",ref:o,onChange:i=>l({...s,image:i.target.files[0]})}),(a==null?void 0:a.image)&&e.jsx("img",{src:a.image,alt:"Current",style:{width:100,marginTop:10}}),c.image&&e.jsx("div",{className:"text-danger",children:c.image})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{name:"description",className:"form-control",rows:"3",value:s.description,onChange:i=>l({...s,description:i.target.value})})]})}),e.jsxs("button",{type:"submit",name:"submitButton",className:"btn btn-success waves-effect waves-light mt-5 mb-3",children:[" ",n?"Update":"Create"," "]}),e.jsxs(v,{href:"/admin/categories",children:[" ",e.jsx("button",{type:"button",name:"submitButton",className:"btn btn-danger waves-effect waves-light mt-5 mb-3",children:" Cancel"})]})]})})]})})})]})}export{y as default};
