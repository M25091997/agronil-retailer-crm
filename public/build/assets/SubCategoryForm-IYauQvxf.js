import{r as o,j as e,L as h}from"./app-jeUwygDn.js";import{A as u,a as m}from"./AuthenticatedLayout-CN2x6Ld-.js";import{P as j}from"./PageHeader-Cn26Dpte.js";function b({subCategory:i=null,categories:p}){const c=!!i,[n,d]=o.useState({}),[s,l]=o.useState({name:"",category_id:"",image:"",description:"",is_active:!0});o.useEffect(()=>{c&&i&&l({name:i.name||"",category_id:i.category_id||"",image:null,description:i.description||"",is_active:i.is_active??!0})},[i,c]);const x=async a=>{if(a.preventDefault(),console.log(s),!g())return;const r=new FormData;r.append("name",s.name),r.append("category_id",s.category_id),r.append("description",s.description),r.append("is_active",s.is_active?1:0),s.image&&r.append("image",s.image);try{let t;c?(r.append("_method","PUT"),t=await m.post(`/admin/sub-categories/${i.id}`,r)):t=await m.post("/admin/sub-categories",r),alert(t.data.message||"Operation successful.")}catch(t){t.response?(console.error("Error response:",t.response.data),d(t.response.data.errors||{})):console.error("Unexpected error:",t.message)}},g=()=>{var r;const a={};return(r=s.name)!=null&&r.trim()||(a.name="Sub category name is required"),s.category_id||(a.category_id="Category is required"),!c&&!s.image&&(a.image="Category image is required"),d(a),Object.keys(a).length===0};return e.jsxs(u,{children:[e.jsx(j,{title:"Sub Category",menu:"Product"}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"card-title",children:"Sub Category Details."})}),e.jsx("div",{className:"card-body p-4",children:e.jsxs("form",{onSubmit:x,encType:"multipart/form-data",children:[e.jsx("div",{className:"col-lg-12",children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{class:"form-group",children:[e.jsx("label",{for:"exampleFormControlSelect1",children:"Select Category"}),e.jsxs("select",{class:"form-control",name:"category_id",id:"exampleFormControlSelect1",value:s.category_id||"",onChange:a=>l({...s,category_id:a.target.value}),children:[e.jsx("option",{value:"",children:"Choose..."}),p.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),n.category_id&&e.jsx("div",{className:"text-danger",children:n.category_id})]})})}),e.jsx("div",{className:"col-lg-12",children:e.jsx("div",{className:"mb-3",children:e.jsxs("div",{class:"form-group",children:[e.jsxs("label",{className:"form-label",children:[" Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",name:"name",className:"form-control",value:s.name,onChange:a=>l({...s,name:a.target.value})}),n.name&&e.jsx("div",{className:"text-danger",children:n.name})]})})}),e.jsx("div",{className:"col-lg-12",children:e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label",children:["Category image ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"file",name:"image",className:"form-control",onChange:a=>l({...s,image:a.target.files[0]})}),(i==null?void 0:i.image)&&e.jsx("img",{src:`/${i.image}`,alt:"Current",style:{width:100,marginTop:10}}),n.image&&e.jsx("div",{className:"text-danger",children:n.image})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{name:"description",className:"form-control",rows:"3",value:s.description,onChange:a=>l({...s,description:a.target.value})})]})}),e.jsxs("button",{type:"submit",name:"submitButton",className:"btn btn-success waves-effect waves-light mt-5 mb-3",children:[" ",c?"Update":"Create"," "]}),e.jsxs(h,{href:"/admin/sub-categories",children:[" ",e.jsx("button",{type:"button",name:"submitButton",className:"btn btn-danger waves-effect waves-light mt-5 mb-3",children:" Cancel"})]})]})})]})})})]})}export{b as default};
